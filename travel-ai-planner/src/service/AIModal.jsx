import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
 
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Mussorie, for 3 Days for Couple with a Cheap budget priortising adventure, wildlife places. Give me a Hotels options list with Hotel Name, Hotel address, Price, Hotel Image url, geo coordinates, rating, description and suggest itinerart with placeName, Place Details, place image url, Geo Coordinates, best time to visit withing the day, ticket pricing, time to travel each of the location for 3 Days with each day plan and best time to visit in JSON format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a detailed 3-day travel plan for a couple on a budget in Mussoorie, focusing on adventure and wildlife, packaged in JSON format.  I'll also include hotel options, and an itinerary with estimated costs, timings, and travel durations.\n\n**Important Considerations:**\n\n*   **Budget:** \"Cheap\" is relative.  I'm assuming a budget-conscious approach focusing on guesthouses/budget hotels, local transportation (shared cabs, walking), and affordable meals.  I'll include price ranges wherever possible.  Expect to spend roughly INR 2000-3000 per day for the couple, excluding travel to/from Mussoorie.\n*   **Transportation:** Within Mussoorie, walking is often the best way to experience the town. Shared taxis/auto-rickshaws are available for longer distances.\n*   **Wildlife:**  Mussoorie isn't a major wildlife destination like a national park.  The focus will be on scenic natural areas where you might spot birds and smaller wildlife.\n*   **Adventure:** I will focus on trekking options and activities like rappelling (if available within your budget).\n*   **Flexibility:** This is a suggested itinerary.  Adjust it based on your interests and energy levels.\n\n```json\n{\n  \"location\": \"Mussoorie, India\",\n  \"travelers\": \"Couple\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Budget-friendly\",\n  \"theme\": \"Adventure & Wildlife (Scenic Nature)\",\n  \"currency\": \"INR\",\n\n  \"hotel_options\": [\n    {\n      \"hotelName\": \"Hotel Ratan\",\n      \"hotelAddress\": \"The Mall Road, Mussoorie\",\n      \"priceRange\": \"1500-2500\",\n      \"hotelImageURL\": \"https://example.com/hotelratan.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 30.4552,\n        \"longitude\": 78.0761\n      },\n      \"rating\": 3.5,\n      \"description\": \"Simple hotel on Mall Road, offering basic amenities and a convenient location. Good for budget travelers.\"\n    },\n    {\n      \"hotelName\": \"Hotel Ashoka Continental\",\n      \"hotelAddress\": \"The Mall Road, Mussoorie\",\n      \"priceRange\": \"2000-3500\",\n      \"hotelImageURL\": \"https://example.com/hotelashoka.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 30.4548,\n        \"longitude\": 78.0755\n      },\n      \"rating\": 4.0,\n      \"description\": \"A slightly more upscale option on Mall Road with comfortable rooms and decent views. Good value for money.\"\n    },\n    {\n      \"hotelName\": \"Mussoorie Gateway\",\n      \"hotelAddress\": \"Near Picture Palace, The Mall Road, Mussoorie\",\n      \"priceRange\": \"1200-2000\",\n      \"hotelImageURL\": \"https://example.com/mussooriegateway.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 30.4562,\n        \"longitude\": 78.0770\n      },\n      \"rating\": 3.0,\n      \"description\": \"A budget-friendly guesthouse located near Picture Palace, offering simple rooms and a convenient location.  Suitable for backpackers.\"\n    }\n  ],\n\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring Mall Road & Scenic Views\",\n      \"plan\": [\n        {\n          \"placeName\": \"Mall Road\",\n          \"placeDetails\": \"The heart of Mussoorie. Enjoy a leisurely stroll, shop for souvenirs, and soak in the atmosphere. Street food is available.\",\n          \"placeImageURL\": \"https://example.com/mallroad.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.455,\n            \"longitude\": 78.076\n          },\n          \"bestTimeToVisit\": \"Late afternoon/Evening (3 PM - 9 PM)\",\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"N/A (Located centrally)\"\n        },\n        {\n          \"placeName\": \"Gun Hill\",\n          \"placeDetails\": \"Second highest peak in Mussoorie.  Reach by cable car (ropeway) or by walking (steeper climb). Offers panoramic views of the Himalayas.\",\n          \"placeImageURL\": \"https://example.com/gunhill.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.453,\n            \"longitude\": 78.074\n          },\n          \"bestTimeToVisit\": \"Morning/Afternoon (10 AM - 4 PM)\",\n          \"ticketPricing\": \"Ropeway: ~INR 150 per person (round trip)\",\n          \"timeToTravel\": \"15-20 minutes walk from Mall Road to ropeway station, then ~5 minutes by ropeway.\"\n        },\n        {\n          \"placeName\": \"Cambridge Book Depot\",\n          \"placeDetails\": \"Famous bookstore where author Ruskin Bond often visits on Saturdays.  Browse books, meet the author (if lucky), and enjoy the literary atmosphere.\",\n          \"placeImageURL\": \"https://example.com/cambridgebookdepot.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.456,\n            \"longitude\": 78.077\n          },\n          \"bestTimeToVisit\": \"Afternoon (2 PM - 5 PM) - Especially Saturdays\",\n          \"ticketPricing\": \"Free (unless you buy books)\",\n          \"timeToTravel\": \"Walking distance from Mall Road\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Nature Walk & Adventure Activities\",\n      \"plan\": [\n        {\n          \"placeName\": \"Lal Tibba\",\n          \"placeDetails\": \"Highest point in Mussoorie. Offers stunning views of the snow-capped Himalayan peaks.  A telescope is available (small fee) for closer views.\",\n          \"placeImageURL\": \"https://example.com/laltibba.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.474,\n            \"longitude\": 78.079\n          },\n          \"bestTimeToVisit\": \"Morning (8 AM - 11 AM) - For clear views\",\n          \"ticketPricing\": \"Free (telescope usage is extra)\",\n          \"timeToTravel\": \"30-45 minutes by shared taxi from Mall Road.\"\n        },\n        {\n          \"placeName\": \"Company Garden\",\n          \"placeDetails\": \"A well-maintained garden with flowers, fountains, and boating facilities. A good place to relax and enjoy the scenery.\",\n          \"placeImageURL\": \"https://example.com/companygarden.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.443,\n            \"longitude\": 78.071\n          },\n          \"bestTimeToVisit\": \"Afternoon (12 PM - 4 PM)\",\n          \"ticketPricing\": \"INR 25 per person\",\n          \"timeToTravel\": \"20-30 minutes by shared taxi from Lal Tibba/Mall Road.\"\n        },\n        {\n          \"placeName\": \"Adventure Activities (Near Mussoorie)\",\n          \"placeDetails\": \"Check with local tour operators for options like ziplining, rappelling, and valley crossing. These are often available in the surrounding areas. Negotiate prices beforehand.\",\n          \"placeImageURL\": \"https://example.com/adventure.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.44,\n            \"longitude\": 78.08\n          },\n          \"bestTimeToVisit\": \"Afternoon (2 PM - 5 PM)\",\n          \"ticketPricing\": \"Varies depending on the activity. Expect INR 500-1500 per person.\",\n          \"timeToTravel\": \"Varies depending on location of activity (ask the tour operator)\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Waterfalls & Departure\",\n      \"plan\": [\n        {\n          \"placeName\": \"Kempty Falls\",\n          \"placeDetails\": \"A popular waterfall where you can bathe in the cool water. Can be crowded, especially during peak season.\",\n          \"placeImageURL\": \"https://example.com/kemptyfalls.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.497,\n            \"longitude\": 78.028\n          },\n          \"bestTimeToVisit\": \"Morning (9 AM - 12 PM) - To avoid crowds\",\n          \"ticketPricing\": \"Free (parking charges apply)\",\n          \"timeToTravel\": \"1-1.5 hours by shared taxi from Mussoorie.\"\n        },\n        {\n          \"placeName\": \"Lake Mist\",\n          \"placeDetails\": \"A smaller, less crowded lake near Kempty Falls. Offers boating facilities and a peaceful atmosphere.\",\n          \"placeImageURL\": \"https://example.com/lakemist.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.500,\n            \"longitude\": 78.025\n          },\n          \"bestTimeToVisit\": \"Afternoon (12 PM - 2 PM)\",\n          \"ticketPricing\": \"Entry fee: INR 25 per person, Boating: INR 100-200\",\n          \"timeToTravel\": \"15-20 minutes from Kempty Falls by shared taxi/walking.\"\n        },\n        {\n          \"placeName\": \"Departure\",\n          \"placeDetails\": \"Travel back from Lake Mist or Kempty falls to Dehradun Railway station, or Airport as per travel plan\",\n          \"placeImageURL\": \"null\",\n          \"geoCoordinates\": {\n            \"latitude\": 30.32,\n            \"longitude\": 78.03\n          },\n          \"bestTimeToVisit\": \"As per travel plan\",\n          \"ticketPricing\": \"Fare as per the chosen transport\",\n          \"timeToTravel\": \"2 Hours to Dehradun Railway station/Airport\"\n        }\n      ]\n    }\n  },\n\n  \"notes\": [\n    \"Prices are estimates and may vary depending on the season and availability.\",\n    \"Always negotiate prices with taxi drivers and tour operators.\",\n    \"Carry warm clothing, even during summer, as the weather in Mussoorie can be unpredictable.\",\n    \"Wear comfortable shoes for walking and trekking.\",\n    \"Stay hydrated and carry water with you.\",\n    \"Be respectful of the local culture and environment.\",\n    \"Book accommodations and transportation in advance, especially during peak season.\",\n     \"For adventure activities, choose certified operators and ensure proper safety equipment is used.\",\n    \"Check weather forecasts before planning outdoor activities.\",\n    \"Purchase travel insurance for extra safety\"\n  ]\n}\n```\n\n**How to Use This JSON:**\n\n1.  **Copy the JSON text.**\n2.  **Paste it into a JSON viewer/formatter:** There are many free online tools that will make the JSON more readable.\n3.  **Use a programming language (e.g., Python, JavaScript) to parse the JSON data.** This will allow you to access and display the information in your application.\n\n**Explanation of Fields:**\n\n*   `location`: The destination.\n*   `travelers`: Type of travelers.\n*   `duration`: Length of the trip.\n*   `budget`: The budget level.\n*   `theme`: Focus of the trip.\n*   `hotel_options`: An array of hotel objects, each with details like name, address, price, image, coordinates, rating, and description.  Remember to replace the placeholder image URLs with actual links.\n*   `itinerary`:  A structured plan for each day.\n    *   `day1`, `day2`, `day3`: Each day has a theme and a `plan`.\n    *   `plan`: An array of place objects, each with details like name, description, image, coordinates, best time to visit, ticket pricing, and travel time.\n*   `notes`: Important reminders and tips.\n\n**Customization:**\n\n*   **Hotel Images:** Find actual image URLs for the hotels.\n*   **Adventure Activities:** Contact local tour operators in Mussoorie to get specific pricing and availability for adventure activities and update the itinerary accordingly.\n*   **Wildlife:** Check with local forest department offices or tourism offices for any specific wildlife spotting opportunities or guided tours in the surrounding areas.\n*   **Budget:** Adjust the hotel and activity choices to match your exact budget.\n*   **Interests:**  If you have specific interests (e.g., photography, birdwatching), tailor the itinerary accordingly.\n\n**Important Disclaimers:**\n\n*   I have used placeholder image URLs.  You MUST replace these with actual image links.\n*   Prices and timings are estimates and are subject to change. Always verify the information before your trip.\n*   Safety is your responsibility. Take necessary precautions during adventure activities and be aware of your surroundings.\n*   Wildlife sightings are not guaranteed.\n*   This itinerary is a suggestion, and you can modify it to fit your preferences.\n* Availability of adventure acitvities as per the time of visit is sole responsibility of the traveller to check.\n\nHave a wonderful trip to Mussoorie!\n"},
          ],
        },
      ],
    });
  
    